  # Istio Gateway Configuration for Knative Services
  # This Gateway defines the entry point for external traffic to our Knative services
  # It works directly with Istio Ingress Gateway's LoadBalancer service
  apiVersion: networking.istio.io/v1beta1
  kind: Gateway
  metadata:
    name: knative-gateway
    namespace: lab  # Move to lab namespace to be with Knative services
    annotations:
      # External-DNS annotations for automatic DNS management
      external-dns.alpha.kubernetes.io/hostname: test.raydensolution.com, api.raydensolution.com
      external-dns.alpha.kubernetes.io/ttl: "300"
  spec:
    # Selector to determine which Istio Ingress Gateway to use
    # This should match the labels on your Istio Ingress Gateway deployment
    selector:
      istio: ingressgateway
    servers:
    # HTTP server configuration
    - port:
        number: 80
        name: http
        protocol: HTTP
      # Hosts that this gateway will accept traffic for
      # These should match your DNS domain names
      hosts:
      - "test.raydensolution.com"    # Frontend application
      - "api.raydensolution.com"     # API Gateway and microservices
    # - port:
    #     number: 443
    #     name: https
    #     protocol: HTTPS
    #   tls:
    #     mode: SIMPLE
    #     credentialName: raydensolution-tls
    #   hosts:
    #   - "test.raydensolution.com"
    #   - "api.raydensolution.com" 